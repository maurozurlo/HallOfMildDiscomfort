<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hall of Tortured Souls - JS</title>
<style>
  body { margin: 0; background: black; display: flex; justify-content: center; align-items: center; height: 100vh; }
  canvas { background: black; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="640" height="480"></canvas>
<script>
const HTS_SCREEN_WIDTH = 640;
const HTS_SCREEN_HEIGHT = 480;
const HTS_CREDITS_WIDTH = 256;
const HTS_CREDITS_HEIGHT = 14;

let canvas = document.getElementById('gameCanvas');
let ctx = canvas.getContext('2d');

/* === Fake encoded credits data === */
let creditsData = [];
for (let i=0; i<50; i++) {
    creditsData.push(65 + (i%26) ^ 0x4a); // Some letters xorâ€™d like original
    creditsData.push(0xfe); // New line
}
creditsData.push(0xff); // End marker

/* === Setup framebuffer / palette === */
let palette = new Array(256).fill([0,0,0]);

/* === Draw credits logic === */
function makeCreditsBitmap() {
    let y = 0;
    ctx.font = '14px monospace';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';

    let color = 'white';

    for (let i = 0; i < creditsData.length; i++) {
        let b = creditsData[i];
        if (b === 0xff) break;
        if (b === 0xfe) { y += HTS_CREDITS_HEIGHT; continue; }

        let ch = String.fromCharCode(b ^ 0x4a);
        ctx.fillStyle = color;
        ctx.fillText(ch, HTS_SCREEN_WIDTH/2, y);
        y += HTS_CREDITS_HEIGHT;
    }
}

/* === Framebuffer copy (draw to screen) === */
function copyFramebuffer() {
    // In this simplified version, makeCreditsBitmap already draws to canvas
}

/* === Main loop === */
function gameLoop() {
    ctx.fillStyle = 'black';
    ctx.fillRect(0,0,HTS_SCREEN_WIDTH, HTS_SCREEN_HEIGHT);

    makeCreditsBitmap();
    copyFramebuffer();

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
